
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the official Authentication and Authorization framework for CodeIgniter 4">
      
      
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.9">
    
    
      
        <title>Authentication - CodeIgniter Shield</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
          
          
          <meta name="theme-color" content="#ff6e42">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Raleway";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/styles/github.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#authentication" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://codeigniter.com" title="CodeIgniter Shield" class="md-header__button md-logo" aria-label="CodeIgniter Shield" data-md-component="logo">
      
  <img src="../assets/flame.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CodeIgniter Shield
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Authentication
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/codeigniter4/shield" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://codeigniter.com" title="CodeIgniter Shield" class="md-nav__button md-logo" aria-label="CodeIgniter Shield" data-md-component="logo">
      
  <img src="../assets/flame.svg" alt="logo">

    </a>
    CodeIgniter Shield
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/codeigniter4/shield" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Authentication
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#available-authenticators" class="md-nav__link">
    Available Authenticators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth-helper" class="md-nav__link">
    Auth Helper
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authenticator-responses" class="md-nav__link">
    Authenticator Responses
  </a>
  
    <nav class="md-nav" aria-label="Authenticator Responses">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isok" class="md-nav__link">
    isOK()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reason" class="md-nav__link">
    reason()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extrainfo" class="md-nav__link">
    extraInfo()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-authenticator" class="md-nav__link">
    Session Authenticator
  </a>
  
    <nav class="md-nav" aria-label="Session Authenticator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attempt" class="md-nav__link">
    attempt()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check" class="md-nav__link">
    check()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loggedin" class="md-nav__link">
    loggedIn()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logout" class="md-nav__link">
    logout()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forget" class="md-nav__link">
    forget()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-token-authenticator" class="md-nav__link">
    Access Token Authenticator
  </a>
  
    <nav class="md-nav" aria-label="Access Token Authenticator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-tokenapi-authentication" class="md-nav__link">
    Access Token/API Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-access-tokens" class="md-nav__link">
    Generating Access Tokens
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revoking-access-tokens" class="md-nav__link">
    Revoking Access Tokens
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-access-tokens" class="md-nav__link">
    Retrieving Access Tokens
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-token-lifetime" class="md-nav__link">
    Access Token Lifetime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-token-scopes" class="md-nav__link">
    Access Token Scopes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../authorization/" class="md-nav__link">
        Authorization
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../auth_actions/" class="md-nav__link">
        Auth Actions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        Events
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../customization/" class="md-nav__link">
        Customization
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../session_auth_event_and_logging/" class="md-nav__link">
        Session Authenticator Event and Logging
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/api_tokens/" class="md-nav__link">
        Protecting an API with Access Tokens
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/mobile_apps/" class="md-nav__link">
        Mobile Authentication with Access Tokens
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#available-authenticators" class="md-nav__link">
    Available Authenticators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth-helper" class="md-nav__link">
    Auth Helper
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authenticator-responses" class="md-nav__link">
    Authenticator Responses
  </a>
  
    <nav class="md-nav" aria-label="Authenticator Responses">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isok" class="md-nav__link">
    isOK()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reason" class="md-nav__link">
    reason()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extrainfo" class="md-nav__link">
    extraInfo()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-authenticator" class="md-nav__link">
    Session Authenticator
  </a>
  
    <nav class="md-nav" aria-label="Session Authenticator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attempt" class="md-nav__link">
    attempt()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check" class="md-nav__link">
    check()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loggedin" class="md-nav__link">
    loggedIn()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logout" class="md-nav__link">
    logout()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forget" class="md-nav__link">
    forget()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-token-authenticator" class="md-nav__link">
    Access Token Authenticator
  </a>
  
    <nav class="md-nav" aria-label="Access Token Authenticator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-tokenapi-authentication" class="md-nav__link">
    Access Token/API Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-access-tokens" class="md-nav__link">
    Generating Access Tokens
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revoking-access-tokens" class="md-nav__link">
    Revoking Access Tokens
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-access-tokens" class="md-nav__link">
    Retrieving Access Tokens
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-token-lifetime" class="md-nav__link">
    Access Token Lifetime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-token-scopes" class="md-nav__link">
    Access Token Scopes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/codeigniter4/shield/edit/master/docs/authentication.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="authentication">Authentication</h1>
<ul>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#available-authenticators">Available Authenticators</a></li>
<li><a href="#auth-helper">Auth Helper</a></li>
<li><a href="#authenticator-responses">Authenticator Responses</a><ul>
<li><a href="#isok">isOK()</a></li>
<li><a href="#reason">reason()</a></li>
<li><a href="#extrainfo">extraInfo()</a></li>
</ul>
</li>
<li><a href="#session-authenticator">Session Authenticator</a><ul>
<li><a href="#attempt">attempt()</a></li>
<li><a href="#check">check()</a></li>
<li><a href="#loggedin">loggedIn()</a></li>
<li><a href="#logout">logout()</a></li>
<li><a href="#forget">forget()</a></li>
</ul>
</li>
<li><a href="#access-token-authenticator">Access Token Authenticator</a><ul>
<li><a href="#access-tokenapi-authentication">Access Token/API Authentication</a></li>
<li><a href="#generating-access-tokens">Generating Access Tokens</a></li>
<li><a href="#revoking-access-tokens">Revoking Access Tokens</a></li>
<li><a href="#retrieving-access-tokens">Retrieving Access Tokens</a></li>
<li><a href="#access-token-lifetime">Access Token Lifetime</a></li>
<li><a href="#access-token-scopes">Access Token Scopes</a></li>
</ul>
</li>
</ul>
<p>Authentication is the process of determining that a visitor actually belongs to your website,
and identifying them. Shield provides a flexible and secure authentication system for your
web apps and APIs.</p>
<h2 id="available-authenticators">Available Authenticators</h2>
<p>Shield ships with 2 authenticators that will serve several typical situations within web app development: the
Session authenticator, which uses username/email/password to authenticate against and stores it in the session,
and the Access Tokens authenticator which uses private access tokens passed in the headers.</p>
<p>The available authenticators are defined in <code>Config\Auth</code>:</p>
<pre class="highlight"><code class="language-php">public $authenticators = [
    // alias  =&gt; classname
    'session' =&gt; Session::class,
    'tokens'  =&gt; AccessTokens::class,
];</code></pre>
<p>The default authenticator is also defined in the configuration file, and uses the alias given above:</p>
<pre class="highlight"><code class="language-php">public $defaultAuthenticator = 'session';</code></pre>
<h2 id="auth-helper">Auth Helper</h2>
<p>The auth functionality is designed to be used with the <code>auth_helper</code> that comes with Shield. This
helper method provides the <code>auth()</code> command which returns a convenient interface to the most frequently
used functionality within the auth libraries. This must be loaded before it can be used.</p>
<pre class="highlight"><code class="language-php">// get the current user
auth()-&gt;user();

// get the current user's id
auth()-&gt;id();
// or
user_id();</code></pre>
<blockquote>
<p><strong>Note</strong>
The <code>auth_helper</code> is autoloaded by Composer. If you want to <em>override</em> the functions,
you need to define them in <code>app/Common.php</code>.</p>
</blockquote>
<h2 id="authenticator-responses">Authenticator Responses</h2>
<p>Many of the authenticator methods will return a <code>CodeIgniter\Shield\Result</code> class. This provides a consistent
way of checking the results and can have additional information return along with it. The class
has the following methods:</p>
<h3 id="isok">isOK()</h3>
<p>Returns a boolean value stating whether the check was successful or not.</p>
<h3 id="reason">reason()</h3>
<p>Returns a message that can be displayed to the user when the check fails.</p>
<h3 id="extrainfo">extraInfo()</h3>
<p>Can return a custom bit of information. These will be detailed in the method descriptions below.</p>
<h2 id="session-authenticator">Session Authenticator</h2>
<p>The Session authenticator stores the user's authentication within the user's session, and on a secure cookie
on their device. This is the standard password-based login used in most web sites. It supports a
secure remember me feature, and more. This can also be used to handle authentication for
single page applications (SPAs).</p>
<h3 id="attempt">attempt()</h3>
<p>When a user attempts to login with their email and password, you would call the <code>attempt()</code> method
on the auth class, passing in their credentials.</p>
<pre class="highlight"><code class="language-php">$credentials = [
    'email'    =&gt; $this-&gt;request-&gt;getPost('email'),
    'password' =&gt; $this-&gt;request-&gt;getPost('password')
];

$loginAttempt = auth()-&gt;attempt($credentials);

if (! $loginAttempt-&gt;isOK()) {
    return redirect()-&gt;back()-&gt;with('error', $loginAttempt-&gt;reason());
}</code></pre>
<p>Upon a successful <code>attempt()</code>, the user is logged in. The Response object returned will provide
the user that was logged in as <code>extraInfo()</code>.</p>
<pre class="highlight"><code class="language-php">$result = auth()-&gt;attempt($credentials);

if ($result-&gt;isOK()) {
    $user = $result-&gt;extraInfo();
}</code></pre>
<p>If the attempt fails a <code>failedLogin</code> event is triggered with the credentials array as
the only parameter. Whether or not they pass, a login attempt is recorded in the <code>auth_logins</code> table.</p>
<p>If <code>allowRemembering</code> is <code>true</code> in the <code>Auth</code> config file, you can tell the Session authenticator
to set a secure remember-me cookie.</p>
<pre class="highlight"><code class="language-php">$loginAttempt = auth()-&gt;remember()-&gt;attempt($credentials);</code></pre>
<h3 id="check">check()</h3>
<p>If you would like to check a user's credentials without logging them in, you can use the <code>check()</code>
method.</p>
<pre class="highlight"><code class="language-php">$credentials = [
    'email'    =&gt; $this-&gt;request-&gt;getPost('email'),
    'password' =&gt; $this-&gt;request-&gt;getPost('password')
];

$validCreds = auth()-&gt;check($credentials);

if (! $validCreds-&gt;isOK()) {
    return redirect()-&gt;back()-&gt;with('error', $validCreds-&gt;reason());
}</code></pre>
<p>The Result instance returned contains the valid user as <code>extraInfo()</code>.</p>
<h3 id="loggedin">loggedIn()</h3>
<p>You can determine if a user is currently logged in with the aptly titled method, <code>loggedIn()</code>.</p>
<pre class="highlight"><code class="language-php">if (auth()-&gt;loggedIn()) {
    // Do something.
}</code></pre>
<h3 id="logout">logout()</h3>
<p>You can call the <code>logout()</code> method to log the user out of the current session. This will destroy and
regenerate the current session, purge any remember-me tokens current for this user, and trigger a
<code>logout</code> event.</p>
<pre class="highlight"><code class="language-php">auth()-&gt;logout();</code></pre>
<h3 id="forget">forget()</h3>
<p>The <code>forget</code> method will purge all remember-me tokens for the current user, making it so they
will not be remembered on the next visit to the site.</p>
<h2 id="access-token-authenticator">Access Token Authenticator</h2>
<p>The Access Token authenticator supports the use of revoke-able API tokens without using OAuth. These are commonly
used to provide third-party developers access to your API. These tokens typically have a very long
expiration time, often years.</p>
<p>These are also suitable for use with mobile applications. In this case, the user would register/sign-in
with their email/password. The application would create a new access token for them, with a recognizable
name, like John's iPhone 12, and return it to the mobile application, where it is stored and used
in all future requests.</p>
<h3 id="access-tokenapi-authentication">Access Token/API Authentication</h3>
<p>Using access tokens requires that you either use/extend <code>CodeIgniter\Shield\Models\UserModel</code> or
use the <code>CodeIgniter\Shield\Authentication\Traits\HasAccessTokens</code> on your own user model. This trait
provides all of the custom methods needed to implement access tokens in your application. The necessary
database table, <code>auth_identities</code>, is created in Shield's only migration class, which must be run
before first using any of the features of Shield.</p>
<h3 id="generating-access-tokens">Generating Access Tokens</h3>
<p>Access tokens are created through the <code>generateAccessToken()</code> method on the user. This takes a name to
give to the token as the first argument. The name is used to display it to the user so they can
differentiate between multiple tokens.</p>
<pre class="highlight"><code class="language-php">$token = $user-&gt;generateAccessToken('Work Laptop');</code></pre>
<p>This creates the token using a cryptographically secure random string. The token
is hashed (sha256) before saving it to the database. The method returns an instance of
<code>CodeIgniters\Shield\Authentication\Entities\AccessToken</code>. The only time a plain text
version of the token is available is in the <code>AccessToken</code> returned immediately after creation.</p>
<p><strong>The plain text version should be displayed to the user immediately so they can copy it for
their use.</strong> If a user loses it, they cannot see the raw version anymore, but they can generate
a new token to use.</p>
<pre class="highlight"><code class="language-php">$token = $user-&gt;generateAccessToken('Work Laptop');

// Only available immediately after creation.
echo $token-&gt;raw_token;</code></pre>
<h3 id="revoking-access-tokens">Revoking Access Tokens</h3>
<p>Access tokens can be revoked through the <code>revokeAccessToken()</code> method. This takes the plain-text
access token as the only argument. Revoking simply deletes the record from the database.</p>
<pre class="highlight"><code class="language-php">$user-&gt;revokeAccessToken($token);</code></pre>
<p>Typically, the plain text token is retrieved from the request's headers as part of the authentication
process. If you need to revoke the token for another user as an admin, and don't have access to the
token, you would need to get the user's access tokens and delete them manually.</p>
<p>You can revoke all access tokens with the <code>revokeAllAccessTokens()</code> method.</p>
<pre class="highlight"><code class="language-php">$user-&gt;revokeAllAccessTokens();</code></pre>
<h3 id="retrieving-access-tokens">Retrieving Access Tokens</h3>
<p>The following methods are available to help you retrieve a user's access tokens:</p>
<pre class="highlight"><code class="language-php">// Retrieve a single token by plain text token
$token = $user-&gt;getAccessToken($rawToken);

// Retrieve a single token by it's database ID
$token = $user-&gt;getAccessTokenById($id);

// Retrieve all access tokens as an array of AccessToken instances.
$tokens = $user-&gt;accessTokens();</code></pre>
<h3 id="access-token-lifetime">Access Token Lifetime</h3>
<p>Tokens will expire after a specified amount of time has passed since they have been used.
By default, this is set to 1 year. You can change this value by setting the <code>accessTokenLifetime</code>
value in the <code>Auth</code> config file. This is in seconds so that you can use the
<a href="https://codeigniter.com/user_guide/general/common_functions.html#time-constants">time constants</a>
that CodeIgniter provides.</p>
<pre class="highlight"><code class="language-php">public $unusedTokenLifetime = YEAR;</code></pre>
<h3 id="access-token-scopes">Access Token Scopes</h3>
<p>Each token can be given one or more scopes they can be used within. These can be thought of as
permissions the token grants to the user. Scopes are provided when the token is generated and
cannot be modified afterword.</p>
<pre class="highlight"><code class="language-php">$token = $user-&gt;gererateAccessToken('Work Laptop', ['posts.manage', 'forums.manage']);</code></pre>
<p>By default a user is granted a wildcard scope which provides access to all scopes. This is the
same as:</p>
<pre class="highlight"><code class="language-php">$token = $user-&gt;gererateAccessToken('Work Laptop', ['*']);</code></pre>
<p>During authentication, the token the user used is stored on the user. Once authenticated, you
can use the <code>tokenCan()</code> and <code>tokenCant()</code> methods on the user to determine if they have access
to the specified scope.</p>
<pre class="highlight"><code class="language-php">if ($user-&gt;tokenCan('posts.manage')) {
    // do something....
}

if ($user-&gt;tokenCant('forums.manage')) {
    // do something....
}</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../quickstart/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quick Start Guide" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Quick Start Guide
            </div>
          </div>
        </a>
      
      
        
        <a href="../authorization/" class="md-footer__link md-footer__link--next" aria-label="Next: Authorization" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Authorization
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/codeigniter4/shield" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/highlight.min.js"></script>
      
        <script src="../assets/hljs.js"></script>
      
    
  </body>
</html>